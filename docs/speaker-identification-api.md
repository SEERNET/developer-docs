---
id: speaker-identification-api
title: Text Independent Speaker Identification API
sidebar_label: Speaker Identification API
---

Text Independent Speaker Identification API tries to figure out *"Who Speaks When"* for already enrolled speakers. *Text Independent* implies that there are no restrictions on what the speaker says in the audio and therefore no specific passphrase is required during enrollment or identification.

The algorithm splits audio clip into segments corresponding to a unique speaker and then compares its features with the voiceprints of the specified speakers in the request. Finally, the API returns start and end of the segment with the identified speaker. In cases where no user is identified, the segments are marked as `UserNotIdentified`.

> Enroll user using [Speaker Enrollment Api](./speaker-enrollment-api.html) before using identification api.

### POST Request

### Async

`POST https://proxy.api.deepaffects.com/audio/generic/api/v2/async/diarization/identify`

### Sync

`POST https://proxy.api.deepaffects.com/audio/generic/api/v2/sync/diarization/identify`

### Sample Code


<!--DOCUSAURUS_CODE_TABS-->
<!--Shell-->

```shell
curl -X POST \
"https://proxy.api.deepaffects.com/audio/generic/api/v2/async/diarization/identify?apikey=<API_KEY>&webhook=<WEBHOOK_URL>" -H 'content-type: application/json' -d @data.json

curl -X POST \
"https://proxy.api.deepaffects.com/audio/generic/api/v2/sync/diarization/identify?apikey=<API_KEY>" -H 'content-type: application/json' -d @data.json

# contents of data.json
{"content": "bytesEncodedAudioString", "sampleRate": 8000, "encoding": "FLAC", "languageCode": "en-US", speakerIds: ["user1"]}
```

<!--END_DOCUSAURUS_CODE_TABS-->

### Output

<!--DOCUSAURUS_CODE_TABS-->

<!--Sync-->
```json
{
    "segments":
        [{
            "speaker_id": "speaker1",
            "start": 0,
            "end": 1
        }]
}
```

<!--Async-->
```json
{
"request_id": "8bdd983a-c6bd-4159-982d-6a2471406d62",
"api": "requested_api_name"
}
```

<!--Webhook-->
```json
{
"request_id": "8bdd983a-c6bd-4159-982d-6a2471406d62",
"response": {
    "segments":
        [{
            "speaker_id": "speaker1",
            "start": 0,
            "end": 1
        }]
}
}
```
<!--END_DOCUSAURUS_CODE_TABS-->

### Body Parameters

| Parameter    | Type         | Description                               | Notes                        |
| ------------ | ------------ | ----------------------------------------- | ---------------------------- |
| encoding     | String       | Encoding of audio file like MP3, WAV etc. |                              |
| sampleRate   | Number       | Sample rate of the audio file.            |                              |
| languageCode | String       | Language spoken in the audio file.        | [default to &#39;en-US&#39;] |
| speakerIds   | List[String] | List of enrolled speakers to identify     |                              |
| content      | String | base64 encoding of the audio file.                       | Semi-Optional                     |
| url          | String | Publicly facing url                                      | Semi-Optional                     |

> NOTE: Exactly one of url and content should be passed. In case both values are passed, error is thrown


### Query Parameters

| Parameter  | Type   | Description                                                            | Notes                                           |
| ---------- | ------ | ---------------------------------------------------------------------- | ----------------------------------------------- |
| apikey    | String | The apikey                                                             | Required for authentication inside all requests |
| webhook    | String | The webhook url at which the responses will be sent                    | Required for async requests                     |
| request_id | String | An optional unique id to link async response with the original request | Optional                                        |

### Output Parameters (Async)

| Parameter  | Type   | Description                     | Notes                                                              |
| ---------- | ------ | ------------------------------- | ------------------------------------------------------------------ |
| request_id | String | The request id                  | This defaults to the originally sent id or is generated by the api |
| api        | String | The api method which was called |                                                                    |

### Output Parameters (Webhook)

| Parameter  | Type   | Description                 | Notes                                                              |
| ---------- | ------ | --------------------------- | ------------------------------------------------------------------ |
| request_id | String | The request id              | This defaults to the originally sent id or is generated by the api |
| segments   | List   | List of identified segments | The Speaker Identification Segment object is defined below         |

#### Speaker Identification Segment

| Parameter  | Type   | Description                           | Notes |
| ---------- | ------ | ------------------------------------- | ----- |
| speaker_id | String | speaker id of the identified speaker. |       |
| start      | Float  | Start of the audio segment.           |       |
| end        | Float  | end of the audio segment.             |       |
